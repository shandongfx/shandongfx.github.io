<!DOCTYPE html>
	<html>
		<head>
			<title>Using a network-diagram to facilitate eliminating predictor variables</title>
			<!-- link to main stylesheet -->
			<link rel="stylesheet" type="text/css" href="/css/main.css">
		</head>
		<body>
			<nav>
	    		<ul>
	        		<li><a href="/">Home</a></li>
					<li><a href="/publication">Publication</a></li>
	        		<li><a href="/blog/">Research note</a></li>
					<li><a href="/teaching/">Teaching</a></li>
					

	    		</ul>
			</nav>
			<div class="container">
			
			<h1>Using a network-diagram to facilitate eliminating predictor variables</h1>
<p class="meta">01 Jan 2015</p>

<div class="post">
  <p>In ecological niche modelling, we always faced the problem of variable 
selection and colinearity (Dormann et al. 2013). Because highly correlated predictor variables may lead to model overfitting, so we introduced a method to facilitate eliminating predictor variables when the aim is to avoid colinearity (see more details in our paper Feng et al. 2015). We used network-diagram which is straight forward in showing the complex colinearity structure of all predictor variables.</p>

<p>The general steps:</p>
<ul>
  <li>
    <p>(1) Build a Pearson correlation matrix for the all predictor variables with raster library in R (Hijmans 2014). Here we used 19 bioclimatic variables as an example (worldclim.org).</p>
  </li>
  <li>
    <p>(2) Draw a network diagram using igraph library in R (Csardi and Nepusz 2006). In the network diagram, highly correlated (|r|&gt;0.7) variables are linked by lines, and the group of variables with colinearity would clustere together (Figure 1).</p>
  </li>
  <li>
    <p>(3) With this network diagram, there are multiply ways to select variables depending on your needs. One way is to pick one variable out of a group of clusted variables; another way is to choose a starting node and jumping across a nod to select a second node. However, the variable selection should be ecologically justified. For example, we prioritized extreme variables instead of average variables among the clustered variables (e.g., we selected maximum temperature of the warmest month instead of annual mean temperature), assuming that extreme variables are more likely to be limiting factors for the species.</p>
  </li>
</ul>

<p><img src="http://localhost:4000/figure/old_post/fig.1.jpg" alt="network1" style="width: 300px;" align="middle" /></p>

<p><em>Figure 1. Network diagram of 19 bioclimatic variables. The yellow circles represent temperature variables and the green circles represent precipitation variables. Two circles are linked if the two represented variables have a high correlation (|r|â‰¥ 0.7). The selected variables are marked with red boundaries.</em></p>

<p>*The network diagram is implemented in R, with raster and igraph libraries.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include igraph and raster libraries
library(igraph)
library(raster)

#load predictor variables
#bioFiles &lt;- list.files(path = "path for variable", pattern = ".asc$", recursive = FALSE, full.names=TRUE)
bioFiles &lt;- list.files(path = "D:/projects/2012.IOZ.pheasant/2012.11-ioz-modify/9.rejected/layer4/prjArea_china_10m_asc/", pattern = ".asc$", recursive = FALSE, full.names=TRUE)
bioRaster&lt;- stack(bioFiles)

# Build correlation matrix
m &lt;- layerStats(bioRaster,'pearson',na.rm=TRUE)[[1]]

# Set threshold for "high" correlation, here we used 0.7
m &lt;- abs(m)
m[m&lt;0.7] &lt;- 0

#
#m&lt;-m*10

# Link variables
net &lt;- graph.adjacency(m,mode="undirected",weighted=TRUE,diag=FALSE)

for (i in 1:11){
    tt&lt;-paste("bio",i,sep="")
	for(j in 1:length(V(net)$name)){
		if ( V(net)$name[j]==tt){
			# set up color for the first 11 variables
			V(net)$color[[j]] &lt;- "yellow"
			# set up node size for the first 11 variables
			V(net)$size[[j]] &lt;- 18
			break
			}
	}
}
for (i in 12:19){
    tt&lt;-paste("bio",i,sep="")
	for(j in 1:length(V(net)$name)){
		if ( V(net)$name[j]==tt){
			V(net)$color[[j]]&lt;-"green"
			V(net)$size[[j]]&lt;-18
		}
	}
}
# Draw the network diagram
tkplot(net)
</code></pre>
</div>

<h2 id="references">References:</h2>
<ul>
  <li>Csardi G, Nepusz T (2006) The igraph software package for complex network research. InterJournal Complex Systems:1695</li>
  <li>Dormann CF, Elith J, Bacher S, Buchmann Cand others (2013) Collinearity: a review of methods to deal with it and a simulation study evaluating their performance. Ecography 36:27-46</li>
  <li>Feng, X., C. Lin, H. Qiao, and L. Ji. Assessment of Climatically Suitable Area for Syrmaticus reevesii under Climate Change. Endangered Species Research 28:19-31. doi:10.3354/esr00668</li>
  <li>Hijmans RJ (2014) Raster: geographic data analysis and modeling.cran.r-project.org/web/packages/raster/ (accessed 1 Nov 2014)</li>
</ul>

</div>

			
			</div><!-- /.container -->
			<footer>
<h5> Copyright 2015-2016 by Xiao Feng </h5>
			</footer>
		</body>
	</html>
